"use strict";(self.webpackChunkrayos_admin_react=self.webpackChunkrayos_admin_react||[]).push([[308],{1157:function(e,n,t){var r=t(6934),i=t(703),a=(0,r.ZP)(i.Z)((function(e){e.theme;return{padding:"10px",boxShadow:"unset",border:"2px solid #00000011"}}));n.Z=a},6930:function(e,n,t){t.d(n,{Z:function(){return j}});var r=t(1413),i=t(4165),a=t(5861),s=t(885),o=t(5987),u=t(2791),c=t(7831),f=t(8870),l=t(3044),d=t(3400),p=t(890);var x=t.p+"static/media/ImageUploadIconPreview.ef03b177a4b3ff4e67d793aff4f62a46.svg",g=t(6856),m=t(7589),h=t(184),v=["onChange","maxSize","extension","defaultValue","onDelete"],Z=function(e){var n=e.getRootProps,t=e.getInputProps,i=e.isDragActive,a=e.isImageAdded;return(0,h.jsxs)("div",(0,r.Z)((0,r.Z)({style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",padding:"15px"}},n()),{},{children:[(0,h.jsx)("input",(0,r.Z)({},t())),i?(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(p.Z,{variant:"overline",sx:{textTransform:"capitalize",color:"#666"},children:"DROP HERE!"})}):(0,h.jsx)(h.Fragment,{children:!a&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("img",{src:x,alt:"drag file here",height:"45px",style:{marginLeft:"8px",pointerEvents:"none",userSelect:"none"}}),(0,h.jsx)(p.Z,{variant:"overline",sx:{textTransform:"capitalize",color:"#aaa"},children:"Drag File Here"})]})})]}))},j=function(e){var n=e.onChange,t=e.maxSize,p=e.extension,x=e.defaultValue,j=e.onDelete,w=(0,o.Z)(e,v),y=u.useContext(m.Z),k=(0,u.useState)([]),b=(0,s.Z)(k,2),C=b[0],D=b[1],S=(0,c.uI)({accept:p||[],minSize:0,maxSize:t||5242880,multiple:!0,onDropAccepted:function(e){D(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))},onDropRejected:function(e){y.createSnack(e[0].errors[0].message,"error")}}),F=S.getRootProps,P=S.getInputProps,I=S.isDragActive,R=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:e.sent||D([]);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){!C.length||x&&C[0].preview===x.preview||"function"===typeof n&&R(C)}),[C]),(0,u.useEffect)((function(){x&&D([x])}),[x]),(0,h.jsxs)(f.Z,(0,r.Z)((0,r.Z)({sx:(0,r.Z)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"125px",width:"125px",border:"2px dashed",borderColor:"#00000022",rowGap:.5},w.sx)},w),{},{children:[(0,h.jsx)(Z,{getRootProps:F,getInputProps:P,isDragActive:I,isImageAdded:!!C.length}),C.length?(0,h.jsxs)(f.Z,{sx:{position:"absolute",height:"125px",width:"125px",p:1,"&:hover > div":{display:"flex"}},children:[(0,h.jsx)(l.Z,{src:C[0].preview,alt:C[0].name,style:{height:"108px",width:"108px",m:"12px",borderRadius:0}}),(0,h.jsx)(f.Z,{sx:{display:"none",alignItems:"center",justifyContent:"center",flexDirection:"row",height:"100%",width:"100%",background:"#2D323Faa",position:"absolute",top:0,left:0},children:(0,h.jsx)(d.Z,{color:"secondary",onClick:(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!==typeof j){e.next=5;break}return e.next=3,j(C[0]);case 3:e.sent&&D([]);case 5:case"end":return e.stop()}}),e)}))),children:(0,h.jsx)(g.ZkW,{})})})]}):(0,h.jsx)(h.Fragment,{})]}))}},4308:function(e,n,t){t.r(n);var r=t(4165),i=t(5861),a=t(885),s=t(266),o=t(890),u=t(2791),c=t(1157),f=t(6930),l=t(7589),d=t(4335),p=t(7400),x=t(5239),g=t(184);n.default=function(){var e,n=u.useContext(l.Z),t=u.useState([]),m=(0,a.Z)(t,2),h=m[0],v=m[1],Z=(0,d.nx)().data,j=(0,d.r$)().mutateAsync,w=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.E)((function(){return j(t)}));case 2:(i=e.sent).status?n.createSnack(i.msg):n.createSnack(i.msg,"error");case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),y=(0,d.vu)().mutateAsync,k=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.E)((function(){return y({"Files[]":t})}),[201]);case 2:(i=e.sent).status?n.createSnack(i.msg):n.createSnack(i.msg,"error");case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return u.useEffect((function(){var e;Z&&v((null===Z||void 0===Z||null===(e=Z.data)||void 0===e?void 0:e.data)||[])}),[Z]),(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(s.Z,{sx:{py:2},children:[(0,g.jsx)(o.Z,{variant:"h5",fontWeight:"600",children:"News Feed"}),(0,g.jsxs)(c.Z,{sx:{my:1,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",flexWrap:"wrap",rowGap:1,columnGap:1},children:[null===h||void 0===h||null===(e=h.map)||void 0===e?void 0:e.call(h,(function(e){return(0,g.jsx)(u.Fragment,{children:(0,g.jsx)(f.Z,{defaultValue:{preview:(0,p.FG)(e.image),id:e._id},onDelete:function(e){return w(e.id)}})},e._id)})),(0,g.jsx)(f.Z,{onChange:function(e){return k(e)}})]})]})})}},4335:function(e,n,t){t.d(n,{JT:function(){return d},nx:function(){return s},r$:function(){return u},vu:function(){return f}});var r=t(2982),i=t(1933),a=t(7400),s=function(){return(0,i.useQuery)(["get-feed-images"],(function(){return a.ZP.get("feed/image")}),{})},o=function(e){return a.ZP.delete("feed/image/".concat(e))},u=function(){var e=(0,i.useQueryClient)();return(0,i.useMutation)(o,{onSuccess:function(){return e.invalidateQueries("get-feed-images")}})},c=function(e){return a.ZP.postForm("feed/image",e)},f=function(){var e=(0,i.useQueryClient)();return(0,i.useMutation)(c,{onSuccess:function(){return e.invalidateQueries("get-feed-images")}})},l=function(e){return a.ZP.postForm("attachments",{"Files[]":(0,r.Z)(e)})},d=function(){return(0,i.useMutation)(l,{})}}}]);
//# sourceMappingURL=308.e0000382.chunk.js.map