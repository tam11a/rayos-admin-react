"use strict";(self.webpackChunkrayos_admin_react=self.webpackChunkrayos_admin_react||[]).push([[627],{1703:function(e,n,t){var i=t(1413),r=t(4165),l=t(5861),d=t(5987),s=t(4415),o=t(4834),a=t(1918),c=t(3786),u=t(2791),x=t(7589),v=t(4972),h=t(5239),m=t(184),p=["id","status","size"];n.Z=function(e){var n=e.id,t=e.status,j=e.size,f=(0,d.Z)(e,p),Z=function(){switch(t){case"Pending":return"info";case"Shipped":case"Confirmed":return"black";case"Canceled":case"Returned":return"error";case"Delivered":return"success";default:return"default"}},g=(0,v.Ll)(),b=g.mutateAsync,y=(g.isLoading,u.useContext(x.Z)),w=function(){var e=(0,l.Z)((0,r.Z)().mark((function e(t){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.E)((function(){return b({id:n,status:t})}),[201]);case 2:(i=e.sent).status?y.createSnack(i.msg):y.createSnack(i.msg,"error");case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,m.jsxs)(s.Z,(0,i.Z)((0,i.Z)({value:t||"",disabled:"Returned"===t||"Canceled"===t,size:"small",fullWidth:!0,IconComponent:function(){return(0,m.jsx)(m.Fragment,{})},input:(0,m.jsx)(o.ZP,{sx:{pr:0}}),sx:{"& .MuiSelect-select":{padding:"0 !important",display:"flex",alignItems:"center",justifyContent:"center"}},MenuProps:{sx:{mt:"5px"}},renderValue:function(e){return(0,m.jsx)(a.Z,{label:e,color:Z(),size:j||"medium",sx:{fontWeight:"bold",textTransform:"uppercase"},onClick:function(){}},e)}},f),{},{onChange:function(e){return w(e.target.value)},children:[(0,m.jsx)(c.Z,{value:"Pending",disabled:!0,children:"Pending"}),(0,m.jsx)(c.Z,{value:"Confirmed",disabled:"Confirmed"===t,children:"Confirmed"}),(0,m.jsx)(c.Z,{value:"Shipped",disabled:"Shipped"===t,children:"Shipped"}),(0,m.jsx)(c.Z,{value:"Delivered",disabled:"Delivered"===t,children:"Delivered"}),(0,m.jsx)(c.Z,{value:"Canceled",disabled:"Canceled"===t,children:"Canceled"}),(0,m.jsx)(c.Z,{value:"Returned",disabled:"Returned"===t,children:"Returned"})]}))}},8627:function(e,n,t){t.r(n),t.d(n,{default:function(){return J}});var i=t(885),r=t(1889),l=t(3767),d=t(8870),s=t(3239),o=t(3044),a=t(890),c=t(9538),u=t(68),x=t(4518),v=t(703),h=t(5021),m=t(653),p=t(9900),j=t(4721),f=t(6598),Z=t(2791),g=t(4373),b=t(7689),y=t(1087),w=t(7589),C=t(4972),P=t(7400),I=t(6355),D=t(6053),S=t(3967),A=t(5193),k=t(242),W=t(4512),_=t(5825),R=t(9875),F=t(592),G=t(4070),z=t(7317),Q=t(2426),U=t.n(Q),M=t(9126),L=t(5763),N=t(6856),O=t(7425),T=t(1578),E=t(184),q=function(e){var n,t,i,r,l,d,s=e.timelines,o=function(e){switch(e){case"Pending":return(0,E.jsx)(M.YZq,{});case"Confirmed":return(0,E.jsx)(I.AFA,{});case"Shipped":return(0,E.jsx)(N.tR_,{});case"Delivered":return(0,E.jsx)(O.MvH,{});case"Canceled":return(0,E.jsx)(N.B4e,{});case"Returned":return(0,E.jsx)(T.DJx,{});default:return(0,E.jsx)(L.DcD,{})}},u=function(e){switch(e){case"Confirmed":return"warning";case"Delivered":return"success";case"Canceled":case"Returned":return"error";case"Pending":return"info";default:return"black"}},x=(0,S.Z)(),v=(0,A.Z)(x.breakpoints.down("md"));return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(k.Z,{activeStep:v?0:s.length-1,alternativeLabel:!v,sx:{mb:2},orientation:v?"vertical":"horizontal",children:null===s||void 0===s||null===(n=s.sort)||void 0===n||null===(t=n.call(s,(function(e,n){return!v&&(e.createdAt>n.createdAt?1:e.createdAt<n.createdAt?-1:0)})))||void 0===t||null===(i=t.map)||void 0===i?void 0:i.call(t,(function(e){return(0,E.jsxs)(W.Z,{children:[(0,E.jsx)(_.Z,{icon:(0,E.jsx)(R.Z,{sx:{fontSize:"1.2em"},color:u(e.status),children:o(e.status)}),sx:{textAlign:{xs:"left",md:"center"}},optional:e._id===s[0]._id&&v?(0,E.jsx)(E.Fragment,{}):(0,E.jsx)(a.Z,{variant:"caption",children:U()(e.createdAt).format("lll")}),children:e.status}),(0,E.jsx)(c.Z,{mdUp:!0,children:(0,E.jsx)(F.Z,{children:(0,E.jsxs)(G.Z,{icon:o(e.status),severity:u(e.status),children:[(0,E.jsx)(z.Z,{children:e.message}),U()(e.createdAt).format("lll")]})})})]},e._id)}))}),(0,E.jsx)(c.Z,{mdDown:!0,children:null===s||void 0===s||null===(r=s.sort)||void 0===r||null===(l=r.call(s,(function(e,n){return n.createdAt>e.createdAt?1:n.createdAt<e.createdAt?-1:0})))||void 0===l||null===(d=l.map)||void 0===d?void 0:d.call(l,(function(e,n){return(0,E.jsxs)(G.Z,{icon:o(e.status),severity:u(e.status),sx:{fontWeight:!n&&"600"},children:[(0,E.jsx)(z.Z,{sx:{fontWeight:!n&&"600"},children:e.message}),U()(e.createdAt).format("lll")]},e._id)}))})]})},H=t(1703),B=t(6490),J=function(){Z.useContext(w.Z);var e,n,t,S,A,k,W,_,R,F,G,z,Q,U,M,L,N,O,T,J,V,Y,$,K,X,ee,ne,te,ie,re,le,de,se,oe,ae,ce,ue,xe,ve,he,me,pe,je,fe,Ze,ge,be=(0,b.UO)().oid,ye=Z.useState({limit:10,page:1,filters:[]}),we=(0,i.Z)(ye,2),Ce=we[0],Pe=(we[1],(0,C.uy)(be,Ce)),Ie=Pe.data,De=Pe.isLoading,Se=Z.useState([]),Ae=(0,i.Z)(Se,2),ke=Ae[0],We=Ae[1];return Z.useEffect((function(){var e,n;We((null===Ie||void 0===Ie||null===(e=Ie.data)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.products)||[])}),[De]),console.log(Ie),(0,E.jsx)(E.Fragment,{children:(0,E.jsxs)(f.Z,{sx:{py:2},children:[(0,E.jsx)(B.Z,{to:"/order-list",primary:"Back to Order",secondary:"Update Order"}),(0,E.jsxs)(r.ZP,{container:!0,sx:{mt:2},rowGap:2,columnGap:2,children:[(0,E.jsxs)(r.ZP,{item:!0,xs:12,sx:{display:"flex",flexDirection:{xs:"column",md:"row"},alignItems:{xs:"center",md:"flex-start"},rowGap:2,columnGap:3,justifyContent:{xs:"center",md:"space-between"},my:2},children:[(0,E.jsxs)(l.Z,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",children:[(0,E.jsx)(d.Z,{sx:{position:"relative",minHeight:"150px",minWidth:"150px"},component:"form",children:De?(0,E.jsx)(d.Z,{sx:{borderRadius:"0%",position:"relative",height:"100px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,E.jsx)(s.Z,{color:"black"})}):(0,E.jsx)(o.Z,{component:y.rU,to:"/customer/".concat(null===Ie||void 0===Ie||null===(e=Ie.data)||void 0===e||null===(n=e.data)||void 0===n||null===(t=n.user)||void 0===t?void 0:t._id),sx:{width:"150px",height:"150px"},src:(0,P.FG)(null===Ie||void 0===Ie||null===(S=Ie.data)||void 0===S||null===(A=S.data)||void 0===A||null===(k=A.user)||void 0===k?void 0:k.image),alt:null===Ie||void 0===Ie||null===(W=Ie.data)||void 0===W||null===(_=W.data)||void 0===_||null===(R=_.user)||void 0===R?void 0:R.userName})}),(0,E.jsx)(d.Z,{children:(0,E.jsxs)(l.Z,{direction:"column",sx:{alignItems:{xs:"center",sm:"flex-start"}},children:[(0,E.jsx)(a.Z,{variant:"h6",component:y.rU,to:"/customer/".concat(null===Ie||void 0===Ie||null===(F=Ie.data)||void 0===F||null===(G=F.data)||void 0===G||null===(z=G.user)||void 0===z?void 0:z._id),sx:{textDecoration:"none",color:"unset"},children:null===Ie||void 0===Ie||null===(Q=Ie.data)||void 0===Q||null===(U=Q.data)||void 0===U||null===(M=U.user)||void 0===M?void 0:M.userName}),(0,E.jsxs)(a.Z,{variant:"subtitle2",sx:{display:"flex",alignItems:"center",columnGap:1,mt:{sm:1}},children:[(0,E.jsx)(c.Z,{smDown:!0,children:(0,E.jsx)(D.tzA,{})}),(0,E.jsx)("span",{children:null===Ie||void 0===Ie||null===(L=Ie.data)||void 0===L||null===(N=L.data)||void 0===N||null===(O=N.user)||void 0===O?void 0:O.email})]}),(0,E.jsxs)(a.Z,{variant:"subtitle2",sx:{display:"flex",alignItems:"center",columnGap:1,mt:{sm:1}},children:[(0,E.jsx)(c.Z,{smDown:!0,children:(0,E.jsx)(I.DNl,{})}),(0,E.jsx)("span",{children:null===Ie||void 0===Ie||null===(T=Ie.data)||void 0===T||null===(J=T.data)||void 0===J||null===(V=J.user)||void 0===V?void 0:V.phone})]})]})})]}),(0,E.jsxs)(l.Z,{spacing:1,direction:"row",alignItems:"center",children:[(0,E.jsx)(d.Z,{children:(0,E.jsx)(u.Z,{title:"Download Invoice",children:(0,E.jsx)(x.Z,{startIcon:(0,E.jsx)(I.m$D,{}),size:"small",variant:"contained",children:"Invoice"})})}),(0,E.jsx)(H.Z,{status:null===Ie||void 0===Ie||null===(Y=Ie.data)||void 0===Y||null===($=Y.data)||void 0===$?void 0:$.status,id:null===Ie||void 0===Ie||null===(K=Ie.data)||void 0===K||null===(X=K.data)||void 0===X?void 0:X._id})]})]}),(0,E.jsxs)(r.ZP,{item:!0,xs:12,children:[(0,E.jsx)(a.Z,{variant:"h6",sx:{mb:1,fontWeight:"bold"},children:"Order Track"}),(0,E.jsx)(v.Z,{elevation:0,sx:{boxShadow:{xs:0,md:5},p:{xs:0,md:2}},children:(0,E.jsx)(q,{timelines:(null===Ie||void 0===Ie||null===(ee=Ie.data)||void 0===ee||null===(ne=ee.data)||void 0===ne?void 0:ne.timeline)||[]})})]}),(0,E.jsxs)(r.ZP,{item:!0,xs:12,sx:{display:"flex",flexDirection:{xs:"column",md:"row"},rowGap:2,columnGap:3,justifyContent:{xs:"center",md:"space-between"},my:2},children:[(0,E.jsxs)(r.ZP,{item:!0,xs:12,md:7.55,children:[(0,E.jsx)(a.Z,{variant:"h6",sx:{mb:1,fontWeight:"bold"},children:"Ordered Items"}),(0,E.jsx)(v.Z,{elevation:0,sx:{boxShadow:{xs:0,md:5}},children:ke.map((function(e){var n,t,i,r,l,d,s,c;return(0,E.jsxs)(h.ZP,{disablePadding:!0,sx:{px:1,pr:{xs:1,md:2},py:.5},children:[(0,E.jsx)(m.Z,{children:(0,E.jsx)(o.Z,{src:(0,P.FG)(null===e||void 0===e||null===(t=e.product)||void 0===t?void 0:t.image),sx:{borderRadius:1,height:"55px",width:"55px",background:"transparent",color:"primary.dark",mr:1},component:y.rU,to:"/prod/".concat(null===e||void 0===e||null===(i=e.product)||void 0===i?void 0:i._id),children:(0,E.jsx)(g.xUA,{style:{fontSize:"1.8em"}})})}),(0,E.jsx)(p.Z,{sx:{flex:1},primary:(0,E.jsx)(E.Fragment,{children:(0,E.jsx)("b",{children:(null===e||void 0===e||null===(r=e.product)||void 0===r?void 0:r.titleEn)||"-"})}),secondary:(0,E.jsxs)(E.Fragment,{children:[null===e||void 0===e||null===(l=e.product)||void 0===l?void 0:l.variantType,":"," ",(0,E.jsx)("span",{style:{fontWeight:600},children:(null===e||void 0===e||null===(d=e.variant)||void 0===d?void 0:d.titleEn)||"-"})," ","\xd7"," ",(0,E.jsx)("span",{style:{fontWeight:600},children:(null===e||void 0===e||null===(s=e.product)||void 0===s?void 0:s.sellPrice)||0})," ","\u09f3 \xd7"," ",(0,E.jsx)("span",{style:{fontWeight:600},children:(null===e||void 0===e?void 0:e.quantity)||0})," "]}),primaryTypographyProps:{noWrap:!0,sx:{color:"black.main",textDecoration:"none"}},secondaryTypographyProps:{noWrap:!0,sx:{textDecoration:"none","& span":{color:"black.main"}}}}),(0,E.jsxs)(a.Z,{variant:"body1",color:"black",sx:{fontWeight:"bold",minWidth:"15px",textAlign:"center"},children:[(null===e||void 0===e?void 0:e.quantity)*(null===e||void 0===e||null===(c=e.product)||void 0===c?void 0:c.sellPrice)||0," ","\u09f3"]})]},null===e||void 0===e||null===(n=e.product)||void 0===n?void 0:n._id)}))})]}),(0,E.jsxs)(r.ZP,{item:!0,xs:12,md:4,children:[(0,E.jsx)(a.Z,{variant:"h6",sx:{mb:1,fontWeight:"bold"},children:"Shipping Information"}),(0,E.jsxs)(v.Z,{elevation:0,sx:{boxShadow:{xs:0,md:5},p:{xs:0,md:2}},children:[(0,E.jsxs)(l.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{width:"100%"},children:[(0,E.jsx)(a.Z,{variant:"button",children:"Payment Method :"}),(0,E.jsx)("b",{children:null===Ie||void 0===Ie||null===(te=Ie.data)||void 0===te||null===(ie=te.data)||void 0===ie?void 0:ie.paymentMethod})]}),(0,E.jsx)(j.Z,{sx:{my:2}}),(0,E.jsxs)(l.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{width:"100%"},children:[(0,E.jsx)(a.Z,{variant:"button",children:"Receiver Name :"}),(0,E.jsx)("b",{children:(null===Ie||void 0===Ie||null===(re=Ie.data)||void 0===re||null===(le=re.data)||void 0===le||null===(de=le.shipping)||void 0===de?void 0:de.name)||"-"})]}),(0,E.jsxs)(l.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{width:"100%"},children:[(0,E.jsx)(a.Z,{variant:"button",children:"Receiver Phone Number :"}),(0,E.jsx)("b",{children:(null===Ie||void 0===Ie||null===(se=Ie.data)||void 0===se||null===(oe=se.data)||void 0===oe||null===(ae=oe.shipping)||void 0===ae?void 0:ae.phone)||"-"})]}),(0,E.jsxs)(l.Z,{direction:{xs:"row",md:"column"},alignItems:{xs:"center",md:"flex-start"},justifyContent:"space-between",sx:{width:"100%"},children:[(0,E.jsx)(a.Z,{variant:"button",children:"Shipping Address :"}),(0,E.jsx)("b",{children:(null===Ie||void 0===Ie||null===(ce=Ie.data)||void 0===ce||null===(ue=ce.data)||void 0===ue||null===(xe=ue.shipping)||void 0===xe?void 0:xe.address)||"-"})]})]}),(0,E.jsx)(a.Z,{variant:"h6",sx:{mt:3,mb:1,fontWeight:"bold"},children:"Additional Information"}),(0,E.jsxs)(v.Z,{elevation:0,sx:{p:{xs:0,md:2}},children:[(0,E.jsxs)(l.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{width:"100%"},children:[(0,E.jsx)(a.Z,{variant:"button",children:"Subtotal :"}),(0,E.jsxs)(a.Z,{children:[(null===Ie||void 0===Ie||null===(ve=Ie.data)||void 0===ve||null===(he=ve.data)||void 0===he?void 0:he.totalSellPrice)||0," \u09f3"]})]}),(0,E.jsxs)(l.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{width:"100%"},children:[(0,E.jsx)(a.Z,{variant:"button",children:"Delivery Fee :"}),(0,E.jsxs)(a.Z,{children:[(null===Ie||void 0===Ie||null===(me=Ie.data)||void 0===me||null===(pe=me.data)||void 0===pe?void 0:pe.shippingFee)||0," \u09f3"]})]}),(0,E.jsxs)(l.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{width:"100%"},children:[(0,E.jsx)(a.Z,{variant:"button",children:"Discount :"}),(0,E.jsxs)(a.Z,{children:["- ",(null===Ie||void 0===Ie||null===(je=Ie.data)||void 0===je||null===(fe=je.data)||void 0===fe?void 0:fe.discount)||0," \u09f3"]})]}),(0,E.jsx)(j.Z,{sx:{my:1}}),(0,E.jsxs)(l.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{width:"100%",mb:2},children:[(0,E.jsx)(a.Z,{variant:"button",children:(0,E.jsx)("b",{children:"total :"})}),(0,E.jsxs)(a.Z,{children:[(0,E.jsx)("b",{children:(null===Ie||void 0===Ie||null===(Ze=Ie.data)||void 0===Ze||null===(ge=Ze.data)||void 0===ge?void 0:ge.total)||0})," \u09f3"]})]})]})]})]})]})]})})}},4972:function(e,n,t){t.d(n,{Hw:function(){return l},J_:function(){return d},Ll:function(){return a},uy:function(){return s}});var i=t(1933),r=t(7400),l=function(e){return(0,i.useQuery)(["get-all-order",e],(function(){return function(e){return r.ZP.get("order",{params:e})}(e)}),{})},d=function(e,n){return(0,i.useQuery)(["get-user-orderlist-by-id",e,n],(function(){return function(e,n){return r.ZP.get("order/user/".concat(e,"?").concat(n.method&&"all"!==n.method?"status=".concat(n.method,"&"):"","limit=").concat(n.limit,"&page=").concat(n.page))}(e,n)}),{})},s=function(e){return(0,i.useQuery)(["get-products-by-order-id",e],(function(){return function(e){return r.ZP.get("order/".concat(e))}(e)}),{})},o=function(e){var n=e.id,t=e.status;return r.ZP.put("order/".concat(n,"?status=").concat(t))},a=function(){var e=(0,i.useQueryClient)();return(0,i.useMutation)(o,{onSuccess:function(){e.invalidateQueries("get-all-order"),e.invalidateQueries("get-user-orderlist-by-id"),e.invalidateQueries("get-products-by-order-id")}})}}}]);
//# sourceMappingURL=627.8c6a16e8.chunk.js.map